<html>
<head>
<meta name="title" content="Android reverse tether di Linux"/>
<meta name="publish_date" content="2014.08.23 14:27:18"/>
<meta name="author" content="ms@kilabit.info"/>
</head>
<body>
<h1>Android reverse tether di GNU/Linux</h1>

<p>Skenario: Anda memiliki koneksi internet di laptop/PC, baik itu menggunakan LAN atau modem USB, dan ingin menggunakan koneksi tersebut di smartphone/tablet Android anda. Berikut diagramnya,</p>

<p><img alt="Android reverse tether di Linux" src="/journal/2014/08/Android_reverse_tether_di_Linux/reverse_tether.png" style="height:292px; margin-bottom:10px; margin-top:10px; width:544px" /></p>

<p>Solusinya adalah dengan menggunakan metoda <em>reverse tethering.</em></p>

<p>Untuk contoh implementasi disini perangkatnya adalah laptop dengan OS Linux yang terkoneksi ke internet lewat USB modem, dan terkoneksi ke tablet menggunakan nirkabel.</p>

<p>Kebutuhan untuk tablet adalah,</p>

<ul>
	<li>sudah di <em>rooting</em>,</li>
	<li>memiliki fitur WI-FI AP,</li>
	<li>sudah terpasang aplikasi terminal seperti <a href="https://play.google.com/store/apps/details?id=jackpal.androidterm" target="_blank">Android Terminal Emulator</a>.</li>
</ul>

<p>Caranya adalah sebagai berikut.</p>

<ul>
	<li>Sambungkan laptop ke internet dengan USB modem.</li>
	<li>Atur supaya laptop dapat meneruskan setiap data dari perangkat jaringan ke ppp0 menggunakan perintah iptables di bawah ini,</li>
</ul>

<p><code>iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE<br />
iptables -P FORWARD ACCEPT</code></p>

<ul>
	<li>Hidupkan WI-FI AP di perangkat Android.</li>
	<li>Sambungkan WI-FI di laptop supaya terhubung ke WI-FI di Android. Catat alamat laptop yang terhubung ke Wifi tablet, misalnya <code>192.168.43.181</code>. Alamat ini nanti akan menjadi gateway nantinya bagi tablet Android.</li>
	<li>Buka terminal di Android, jalankan perintah di bawah sebagai super user (root),
	<ul>
		<li>Reset IP dari perangkat 3G supaya data tidak terkirim lewat 3G,<br />
		<br />
		<code># ifconfig rmnet0 0.0.0.0</code><br />
		<br /></li>
		<li>Setiap koneksi DNS alihkan ke Google DNS (8.8.8.8),<br />
		<br />
		<code># iptables -t nat -A output -p udp --dport 53 -j DNAT --to-destination 8.8.8.8:53</code><br />
		<br /></li>
		<li>Hapus default gateway<code>,<br />
		<br />
		# ip r del default</code><br />
		<br /></li>
		<li>Atur default gateway ke IP di laptop,<br />
		<br />
		<code># ip r add default via 192.168.43.181</code><br />
		<br /></li>
		<li>Atur IP DNS ke publik DNS<code>,<br />
		<br />
		# setprop net.rmnet0.dns1 8.8.8.8<br />
		# setprop net.rmnet0.dns2 8.8.4.4<br />
		# setprop net.dns1 8.8.8.8<br />
		# setprop net.dns2 8.8.4.4</code></li>
	</ul>
	</li>
</ul>

<p>Selesai.</p>

</body>
</html>